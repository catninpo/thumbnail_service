<!DOCTYPE html>
<html>
  <head>
    <title>Thumbnail Service</title>
  </head>
  <body>
    <h1>Welcome to the Thumbnail Service</h1>
    <div id="thumbnails"></div>

    <hr/>

    <form method="post" action="/search">
      <input type="text" name="tags" value="" placeholder="Tags" />
      <input type="submit" value="Search"/>
    </form>

    </hr>

    <h2>Add an Image</h2>
    <form method="post" action="/upload" enctype="multipart/form-data">
      <input type="text" name="tags" value="" placeholder="Tags" />
      <input type="file" name="image" /> 
      <input type="submit" value="Upload New Image"/>
    </form>

    <script>
        async function getImages() {
          const response = await fetch("/images");
          const images = await response.json();

          let html = "";
          for (let i=0; i < images.length; i++) {
            html += "<div>" + images[i].tags + "<br/>";
            html += "<a href=\"/image/" + images[i].id + "\">";
            html += "<img src=\"/thumb/" + images[i].id + "\">";
            html += "</a></div>";
          }
          document.getElementById("thumbnails").innerHTML = html;
        }

        getImages();
    </script>
  </body>
</html>
